(function(){"use strict";var e,t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};e=function(require,exports,module){var e,t,r,i,s,o,u,a,f,l,c,h,p,d,v,m;return require!=null?(p=require("moment"),m=require("underscore")):typeof window!="undefined"&&window!==null&&(p=window.moment,m=window._),l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i={},i.currentDay=f=function(){var e;return(e=new Date)!=null?e.getDay():void 0},i.rangeOfMoments=i.range=d=function(e,t,n,r,i){var s;return e==null&&(e=0),t==null&&(t=0),n==null&&(n=24),r==null&&(r=0),i==null&&(i=0),s=m(t).chain().range(n).map(function(t){return p().day(e).hours(t).minutes(0)}).value(),r&&s[0].minutes(r),i&&s[s.length-1].minutes(i),s},a=function(e){return e==null&&(e={}),JSON.parse(JSON.stringify(e))},v=function(e){return e=""+e,e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},r=function(){function t(e,t){this.index=t,this.Name=v(e),this.name=e.toLowerCase(),this.short=this.name.slice(0,3),this.Short=v(this.short)}var e=this;return t.prototype.toString=function(){return this.Name},t.prototype.valueOf=function(){return this.index},t.factory=function(e,n){return new t(e,n)},t.find=m.memoize(function(e){return m(t.days).find(function(t){return m(t).contains(e)})}),t.get=function(e,n){var r;return r=t.find(e),r!=null&&n!=null?r[n]:r},t.getCurrentDay=function(){return t.find(f())},t.getCurrent=function(e){return t.get(f(),e)},t.days=m.map(l,t.factory),t.Names=l,t.names=m(t.days).pluck("name"),t}.call(this),c=r.find,h=r.get,o=function(){function r(e,t){e==null&&(e=0),this.setTime(e),this.setDay(t)}var e,t,n;return r.prototype.defaultAMPM="",r.prototype.setDay=function(e){return e==null&&(e=f()),this.day=+e,this},r.prototype.setTime=function(e){var t;return t=this.parse(e),n(t)&&(this.time=t),this},r.prototype.getHour=function(){var e;return((e=this.time)!=null?e.hour:void 0)||0},r.prototype.getMinutes=function(){var e;return((e=this.time)!=null?e.minutes:void 0)||0},r.prototype.isValid=function(){return n(this.time)},r.prototype.parse=function(e){return e==null&&(e=!1),m.isNumber(e)||m.isString(e)?t(e,this.defaultAMPM):m.isObject(e)?m(e).pick("hour","minutes"):{hour:null,minutes:0}},r.prototype.moment=function(){return p().startOf("day").day(this.day).hours(this.getHour()).minutes(this.getMinutes())},r.prototype.isBefore=function(e){return this.moment().diff(e,"minutes")<=1},r.prototype.isAfter=function(e){return this.moment().diff(e,"minutes")>=-1},r.prototype.toJSON=function(){return m(this.time).pick("hour","minutes")},r.prototype.toString=function(){return this.moment().format("h:mm A")},n=function(e){return e==null&&(e={}),e==null||e.hour==null?!1:0>e.hour||e.hour>23?!1:e.minutes!=null&&(0>e.minutes||e.minutes>59)?!1:!0},e=/^([0-2]?\d):?([0-5]\d)?\s?([aApP][mM])?$/,t=function(t,n){var r,i,s,o;return n==null&&(n=""),t=""+t,o={hour:null,minutes:null},s=t.match(e),s&&(o.hour=+s[1],o.minutes=+s[2]||0,r=(s[3]||n).toLowerCase(),i=r==="pm",i&&o.hour<12&&(o.hour+=12)),o},r}(),s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return n(t,e),t.prototype.defaultAMPM="am",t}(o),o.Open=s,o.open=function(e,t){return new s(e,t)},e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return n(t,e),t.prototype.defaultAMPM="pm",t}(o),o.Close=e,o.close=function(t,n){return new e(t,n)},t=function(){function u(e){e==null&&(e={}),e=a(e),this.setDayAndName(e.day),this.setTimes(e)}var e,t,n,i,s;return u.prototype.getOpenRange=function(){var e,t,n;return e=[this.day],this.isOpenAllDay?(e[1]=0,e[2]=24):this.isClosedAllDay?(e[1]=0,e[2]=-1):(n=this.open.moment(),t=this.close.moment(),e[1]=n.hours(),e[2]=t.hours()+1,e[3]=n.minutes(),e[4]=t.minutes()),d.apply(null,e)},u.prototype.isClosedAllDay=!1,u.prototype.isOpenAllDay=!1,u.prototype.isOpen=function(e){var t,n;if(!e||!p.isMoment(e))e?m.isDate(e)?e=p(e):m.isFinite(+e)&&(e=p(+e)):e=p();return this.isClosedAllDay||e.day()!==this.day?!1:this.isOpenAllDay?!0:((t=this.open)!=null?typeof t.isBefore=="function"?t.isBefore(e):void 0:void 0)&&((n=this.close)!=null?typeof n.isAfter=="function"?n.isAfter(e):void 0:void 0)},u.prototype.isClosed=function(e){return e==null&&(e=!1),!this.isOpen(e)},u.prototype.setDayAndName=function(e){return e=r.get(e),this.day=e!=null?e.index:void 0,this.name=e!=null?e.Name:void 0,this},u.prototype.setTimes=function(e){return(e.open||e.close)&&e.close!==!1&&e.open!==!1?s(this,e):e.close===!1?i(this):t(this),this},u.prototype.tomorrow=function(){return this.day===6?0:this.day+1},u.prototype.yesterday=function(){return this.day===0?6:this.day-1},u.prototype.toJSON=function(){var e;return e={day:this.day},this.isOpenAllDay?e.close=!1:this.isClosedAllDay?e.open=!1:(e.open=this.open.toJSON(),e.close=this.close.toJSON()),e},u.prototype.toString=function(){return this.isOpenAllDay?""+this.name+": Open 24 Hours":this.isClosedAllDay?""+this.name+": Closed":""+this.name+": "+this.open+" - "+this.close},m.extend(u.prototype,function(){return m(l).reduce(function(e,t,n){return e["is"+t]=function(){return this.day===n},e},{})}()),u.factory=function(e,t){return e||(e={open:!1}),e=a(e),m(e).has("day")||(e.day=+t),new u(e)},s=function(t,r){return t.isOpenAllDay=t.isClosedAllDay=!1,n(t,r.open),e(t,r.close)},e=function(e,t){return t||(t="23:59"),e.close=o.close(t,e.day)},n=function(e,t){return t||(t=0),e.open=o.open(t,e.day)},i=function(e){return e.open=e.close=null,e.isOpenAllDay=!0,e.isClosedAllDay=!1},t=function(e){return e.open=e.close=null,e.isOpenAllDay=!1,e.isClosedAllDay=!0},u}(),u=function(){function u(e){e||(e=n()),this.setDays(e)}var e,n,s;return u.prototype.day=function(e){return this.getDays()[h(e,"Name")]},u.prototype.getDays=function(){return this.__days},u.prototype.setDays=function(n){var r;return this.__days={},m.isArray(n)?(r=m(e(n)).map(t.factory),m(l).each(function(e){var t;return t=h(e,"index"),this[e]=r[t]},this.__days)):this.setDays(s(n)),this},u.prototype.today=function(){return this.day(f())},u.prototype.isClosed=function(e){return this.today().isClosed(e)},u.prototype.isOpen=function(e){var t;return e==null&&(e=!1),e!=null&&p.isMoment(e)?(t=this.day(e.day()))!=null?t.isOpen(e):void 0:this.today().isOpen(e)},u.prototype.toJSON=function(){return m.invoke(this.getDays(),"toJSON")},u.prototype.toString=function(e){return e==null&&(e=!1),m(this.getDays()).map(String).join("\n")},n=function(){return{Sunday:!1,Monday:!1,Tuesday:!1,Wednesday:!1,Thursday:!1,Friday:!1,Saturday:!1}},e=function(e){return m.isArray(e)||(e=m.toArray(e)),m(0).chain().range(7).map(function(t){return e[t]||{open:!1}}).value()},s=function(e){return e==null&&(e={}),m(e).reduce(function(e,t,n){var r;return r=h(n,"index"),r!=null&&(e[r]=t),e},[])},u.Day=t,u.DayHelper=r,u.Helpers=i,u.Point=o,u}(),module!=null&&(module.exports=u),u},(typeof define!=="undefined"&&define!==null?define.amd:void 0)!=null?define(e):typeof module!="undefined"&&module!==null?e(require,module.exports,module):this.WeeklySchedule=e()}).call(this);